{% extends "base.html" %}
{% block title %}Upload Image{% endblock %}
{% block content %}
<div class="container">
    <h1 class="mt-4">Upload a New Light Image</h1>
    <form method="POST" enctype="multipart/form-data">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.name.label(class="form-control-label") }}
            {{ form.name(class="form-control", size=20) }}
        </div>
        <div class="form-group">
            {{ form.category.label(class="form-control-label") }}
            {{ form.category(class="form-control", size=20) }}
        </div>
        <div class="form-group">
            {{ form.image.label(class="form-control-label") }}
            {{ form.image(class="form-control-file", id="imageUpload") }}
            <img id="imagePreview" src="#" alt="Your image" style="display: none;" />
        </div>
        <div class="form-group">
            {{ form.color.label(class="form-control-label") }}
            {{ form.color(class="form-control", size=20) }}
        </div>
        <div class="form-group">
            {{ form.price.label(class="form-control-label") }}
            {{ form.price(class="form-control", size=20) }}
        </div>
        <div class="form-group">
            {{ form.min_order_quantity.label(class="form-control-label") }}
            {{ form.min_order_quantity(class="form-control", size=20) }}
        </div>
        <div class="form-group">
            {{ form.submit(class="btn btn-primary") }}
        </div>
    </form>
</div>
<script>
document.getElementById('imageUpload').onchange = function (evt) {
    var tgt = evt.target || window.event.srcElement,
        files = tgt.files;

    if (FileReader && files && files.length) {
        var fr = new FileReader();
        fr.onload = function () {
            document.getElementById('imagePreview').src = fr.result;
            document.getElementById('imagePreview').style.display = 'block';
        }
        fr.readAsDataURL(files[0]);
    } else {
        // Fallback for older browsers
    }
};
</script>
{% endblock %}
